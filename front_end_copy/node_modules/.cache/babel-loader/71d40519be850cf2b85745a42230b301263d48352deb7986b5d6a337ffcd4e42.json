{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kiran\\\\Downloads\\\\e-commerce\\\\front_end_copy\\\\src\\\\Context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport function CartProvider({\n  children\n}) {\n  _s();\n  // Load cart from localStorage as fallback\n  const [cartItems, setCartItems] = useState(() => {\n    const stored = localStorage.getItem('cartItems');\n    return stored ? JSON.parse(stored) : [];\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Sync cartItems to localStorage\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  // Load cart from backend, fallback to localStorage\n  const loadCart = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch('http://localhost:5000/api/cart');\n      if (!res.ok) throw new Error('Failed to fetch cart');\n      const data = await res.json();\n      setCartItems(data);\n    } catch (err) {\n      // fallback: keep localStorage cart\n      setError('Could not load cart from server, using local cart.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add to cart via backend, fallback to local\n  const addToCart = async item => {\n    try {\n      const res = await fetch('http://localhost:5000/api/cart', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(item)\n      });\n      if (!res.ok) throw new Error('Failed to add to cart');\n      const data = await res.json();\n      setCartItems(data.cart);\n    } catch (err) {\n      // fallback: add to localStorage\n      setCartItems(prev => {\n        const existing = prev.find(i => i.id === item.id);\n        if (existing) {\n          return prev.map(i => i.id === item.id ? {\n            ...i,\n            quantity: i.quantity + (item.quantity || 1)\n          } : i);\n        }\n        return [...prev, {\n          ...item,\n          quantity: item.quantity || 1\n        }];\n      });\n      setError('Could not sync with server, added to local cart.');\n    }\n  };\n\n  // Remove from cart via backend, fallback to local\n  const removeFromCart = async id => {\n    try {\n      const res = await fetch(`http://localhost:5000/api/cart/${id}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) throw new Error('Failed to remove from cart');\n      const data = await res.json();\n      setCartItems(data.cart);\n    } catch (err) {\n      setCartItems(prev => prev.filter(i => i.id !== id));\n      setError('Could not sync with server, removed from local cart.');\n    }\n  };\n\n  // Update quantity (backend, fallback to local)\n  const updateQuantity = async (id, quantity) => {\n    if (quantity < 1) return removeFromCart(id);\n    try {\n      const res = await fetch(`http://localhost:5000/api/cart/${id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          quantity\n        })\n      });\n      if (!res.ok) throw new Error('Failed to update quantity');\n      const data = await res.json();\n      setCartItems(data.cart);\n    } catch (err) {\n      setCartItems(prev => prev.map(i => i.id === id ? {\n        ...i,\n        quantity\n      } : i));\n      setError('Could not sync with server, updated local cart.');\n    }\n  };\n\n  // Clear cart (remove all items)\n  const clearCart = async () => {\n    for (const item of cartItems) {\n      await removeFromCart(item.id);\n    }\n  };\n\n  // Calculations\n  const subtotal = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const itemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);\n  const tax = subtotal * 0.1;\n  const total = subtotal + tax;\n  useEffect(() => {\n    loadCart();\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addToCart,\n      removeFromCart,\n      clearCart,\n      updateQuantity,\n      subtotal,\n      itemCount,\n      total,\n      loading,\n      error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"sIPE3ldk2EMiqD1yh4Z5dZxubSk=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartContext);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cartItems","setCartItems","stored","localStorage","getItem","JSON","parse","loading","setLoading","error","setError","setItem","stringify","loadCart","res","fetch","ok","Error","data","json","err","addToCart","item","method","headers","body","cart","prev","existing","find","i","id","map","quantity","removeFromCart","filter","updateQuantity","clearCart","subtotal","reduce","sum","price","itemCount","tax","total","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/kiran/Downloads/e-commerce/front_end_copy/src/Context/CartContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport function CartProvider({ children }) {\r\n  // Load cart from localStorage as fallback\r\n  const [cartItems, setCartItems] = useState(() => {\r\n    const stored = localStorage.getItem('cartItems');\r\n    return stored ? JSON.parse(stored) : [];\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Sync cartItems to localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  // Load cart from backend, fallback to localStorage\r\n  const loadCart = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/cart');\r\n      if (!res.ok) throw new Error('Failed to fetch cart');\r\n      const data = await res.json();\r\n      setCartItems(data);\r\n    } catch (err) {\r\n      // fallback: keep localStorage cart\r\n      setError('Could not load cart from server, using local cart.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Add to cart via backend, fallback to local\r\n  const addToCart = async (item) => {\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/cart', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(item),\r\n      });\r\n      if (!res.ok) throw new Error('Failed to add to cart');\r\n      const data = await res.json();\r\n      setCartItems(data.cart);\r\n    } catch (err) {\r\n      // fallback: add to localStorage\r\n      setCartItems(prev => {\r\n        const existing = prev.find(i => i.id === item.id);\r\n        if (existing) {\r\n          return prev.map(i => i.id === item.id ? { ...i, quantity: i.quantity + (item.quantity || 1) } : i);\r\n        }\r\n        return [...prev, { ...item, quantity: item.quantity || 1 }];\r\n      });\r\n      setError('Could not sync with server, added to local cart.');\r\n    }\r\n  };\r\n\r\n  // Remove from cart via backend, fallback to local\r\n  const removeFromCart = async (id) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/cart/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      if (!res.ok) throw new Error('Failed to remove from cart');\r\n      const data = await res.json();\r\n      setCartItems(data.cart);\r\n    } catch (err) {\r\n      setCartItems(prev => prev.filter(i => i.id !== id));\r\n      setError('Could not sync with server, removed from local cart.');\r\n    }\r\n  };\r\n\r\n  // Update quantity (backend, fallback to local)\r\n  const updateQuantity = async (id, quantity) => {\r\n    if (quantity < 1) return removeFromCart(id);\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/cart/${id}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ quantity }),\r\n      });\r\n      if (!res.ok) throw new Error('Failed to update quantity');\r\n      const data = await res.json();\r\n      setCartItems(data.cart);\r\n    } catch (err) {\r\n      setCartItems(prev => prev.map(i => i.id === id ? { ...i, quantity } : i));\r\n      setError('Could not sync with server, updated local cart.');\r\n    }\r\n  };\r\n\r\n  // Clear cart (remove all items)\r\n  const clearCart = async () => {\r\n    for (const item of cartItems) {\r\n      await removeFromCart(item.id);\r\n    }\r\n  };\r\n\r\n  // Calculations\r\n  const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n  const itemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);\r\n  const tax = subtotal * 0.1;\r\n  const total = subtotal + tax;\r\n\r\n  useEffect(() => {\r\n    loadCart();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      cartItems, addToCart, removeFromCart, clearCart, updateQuantity,\r\n      subtotal, itemCount, total, loading, error\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useCart = () => useContext(CartContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}